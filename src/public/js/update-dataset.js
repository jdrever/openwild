function listenForRefreshClicks(e){e.querySelectorAll("[data-refresh='true']").forEach((e=>{e.addEventListener("click",(t=>{pageNumber=e.hasAttribute("data-page")?e.dataset.page:1,updateDataset(pageNumber)&&"INPUT"!=e.tagName&&(console.log("should be preventing default"),t.preventDefault())}))}))}function updateDataset(e){return console.log("showSpinner"),showSpinner(),updateUrl=getUpdateUrl(e),console.log(updateUrl),fetch(updateUrl).then((function(e){return console.log("The API call was successful!"),e.text()})).then((function(e){var t=document.querySelector("#data-table");return t.innerHTML=e,document.getElementById("map-container")&&loadMap(),listenForRefreshClicks(t),!0})).catch((function(e){return console.warn("Something went wrong.",e),!1}))}function showSpinner(){document.querySelector("#data-table").innerHTML='<div class="text-center"><button class="btn btn-primary" type="button" disabled><span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading... </button></div>'}listenForRefreshClicks(document);
